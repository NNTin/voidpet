import{f as k,a as y}from"../chunks/CmgOwLMO.js";import"../chunks/BkLgDh8X.js";import{o as Ue}from"../chunks/C53IjP8k.js";import{q as ge,a8 as xe,a9 as E,aa as Ee,ac as g,ab as m,a as e,s as De,I as pe,at as U,ad as u,af as _e}from"../chunks/DDaQFU9b.js";import{e as b,s as D}from"../chunks/Ctb-TRgi.js";import{e as M,i as N}from"../chunks/B46ZbJhb.js";import{s as Le,a as Te,i as oe}from"../chunks/Czugn3FX.js";import{g as Ae,s as p}from"../chunks/DS2nXDl_.js";import{i as Be}from"../chunks/CA9OjkEd.js";import{p as je}from"../chunks/34TL4UYd.js";import{g as Ie}from"../chunks/CG_OamT2.js";import{b as P}from"../chunks/BpF_sl8_.js";function Fe(h,T){return h==null?null:String(h)}function j(h,T,V,H){var O=h.__style;if(ge||O!==T){var w=Fe(T);(!ge||w!==h.getAttribute("style"))&&(w==null?h.removeAttribute("style"):h.style.cssText=w),h.__style=T}return H}var Re=k('<img class="element-icon svelte-d2uoy5"/>'),Ce=k('<span class="element-icon unknown svelte-d2uoy5">‚ùì</span>'),Me=k('<div class="voidpet-item svelte-d2uoy5" draggable="true" role="button" tabindex="0"><!> <span class="class-emoji svelte-d2uoy5"> </span> <img class="voidpet-image svelte-d2uoy5"/> <span class="voidpet-name svelte-d2uoy5"> </span></div>'),Ne=k('<div class="tier-row svelte-d2uoy5"><div class="tier-label svelte-d2uoy5"> </div> <div class="tier-content svelte-d2uoy5" role="region"></div></div>'),Pe=k('<img class="element-icon svelte-d2uoy5"/>'),Ve=k('<span class="element-icon unknown svelte-d2uoy5">‚ùì</span>'),He=k('<div class="voidpet-item svelte-d2uoy5" draggable="true" role="button" tabindex="0"><!> <span class="class-emoji svelte-d2uoy5"> </span> <img class="voidpet-image svelte-d2uoy5"/> <span class="voidpet-name svelte-d2uoy5"> </span></div>'),Oe=k('<img class="element-icon svelte-d2uoy5"/>'),We=k('<span class="element-icon unknown svelte-d2uoy5">‚ùì</span>'),qe=k('<div class="voidpet-item svelte-d2uoy5" draggable="true" role="button" tabindex="0"><!> <span class="class-emoji svelte-d2uoy5"> </span> <img class="voidpet-image svelte-d2uoy5"/> <span class="voidpet-name svelte-d2uoy5"> </span></div>'),ze=k('<main class="svelte-d2uoy5"><h1 class="svelte-d2uoy5">Voidpet Tier List</h1> <div class="tierlist-container svelte-d2uoy5"><!> <div class="tier-row unranked svelte-d2uoy5"><div class="tier-label svelte-d2uoy5">Unranked</div> <div class="tier-content svelte-d2uoy5" role="region" aria-label="Unranked voidpets"></div></div> <div class="tier-row not-unlocked svelte-d2uoy5"><div class="tier-label svelte-d2uoy5">Not Unlocked</div> <div class="tier-content svelte-d2uoy5" role="region" aria-label="Not unlocked voidpets"></div></div></div> <div class="level-control svelte-d2uoy5"><button class="svelte-d2uoy5">‚àí</button> <span class="level-display svelte-d2uoy5"> </span> <button class="svelte-d2uoy5">+</button></div></main>');function sa(h,T){xe(T,!1);const V=()=>Te(je,"$page",H),[H,O]=Le();let w=[],A=null,I=null,_=pe(5);const W=["SS","S","A","B","C"];let l=pe({SS:[],S:[],A:[],B:[],C:[],unranked:[],notUnlocked:[]});const le="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function ye(t){const a=new TextEncoder().encode(t);let r=0n;for(let d=0;d<a.length;d++)r=r*256n+BigInt(a[d]);if(r===0n)return"0";let s="";for(;r>0n;)s=le[Number(r%62n)]+s,r=r/62n;return a.length.toString(36)+"_"+s}function be(t){try{const[a,r]=t.split("_"),s=parseInt(a,36);let d=0n;for(let n=0;n<r.length;n++){const c=r[n],v=le.indexOf(c);if(v===-1)throw new Error("Invalid base62 character");d=d*62n+BigInt(v)}const o=new Uint8Array(s);for(let n=s-1;n>=0;n--)o[n]=Number(d%256n),d=d/256n;return new TextDecoder().decode(o)}catch(a){throw console.error("Failed to decode base62:",a),a}}Ue(async()=>{w=await Ae();const t=V().url.searchParams.get("t"),a=V().url.searchParams.get("l");if(a){const r=parseInt(a,10);r>=1&&r<=5&&De(_,r)}t?ke(t):U(l,e(l).unranked=[...w])});function ke(t){try{const r=be(t).split("|"),s={};r.forEach(o=>{const[n,c]=o.split(":");s[n]=c?c.split(",").filter(v=>v):[]});const d=new Set;W.forEach(o=>{s[o]?(U(l,e(l)[o]=s[o].map(n=>w.find(c=>c.id===n)).filter(n=>n!==void 0)),s[o].forEach(n=>d.add(n))):U(l,e(l)[o]=[])}),s.notUnlocked?(U(l,e(l).notUnlocked=s.notUnlocked.map(o=>w.find(n=>n.id===o)).filter(o=>o!==void 0)),s.notUnlocked.forEach(o=>d.add(o))):U(l,e(l).notUnlocked=[]),U(l,e(l).unranked=w.filter(o=>!d.has(o.id)))}catch(a){console.error("Failed to parse tier data from URL:",a),U(l,e(l).unranked=[...w])}}function q(){const a=[...W,"notUnlocked"].map(d=>{const o=e(l)[d].map(n=>n.id).join(",");return`${d}:${o}`}).join("|"),r=ye(a),s=new URL(window.location.href);s.searchParams.set("t",r),s.searchParams.set("l",e(_).toString()),Ie(s.pathname+s.search,{replaceState:!0,noScroll:!0,keepFocus:!0})}function he(){e(_)>1&&(_e(_,-1),q())}function we(){e(_)<5&&(_e(_),q())}function z(t,a,r){A=a,I=r,t.dataTransfer&&(t.dataTransfer.effectAllowed="move")}function G(t){t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="move")}function J(t,a){t.preventDefault(),!(!A||!I)&&(U(l,e(l)[I]=e(l)[I].filter(r=>r.id!==A.id)),e(l)[a].find(r=>r.id===A.id)||U(l,e(l)[a]=[...e(l)[a],A]),A=null,I=null,q())}function K(t){return{SS:"#ff4444",S:"#ff8844",A:"#ffdd44",B:"#88dd44",C:"#4488dd",unranked:"#999999",notUnlocked:"#666666"}[t]||"#999999"}function Q(t){return{Fighter:"‚öîÔ∏è",Tank:"üõ°Ô∏è",Healer:"üíö"}[t]||"‚ùì"}function B(t){const r={Wood:"wood",Earth:"earth",Water:"water",Fire:"fire",Metal:"metal"}[t];return r?`${P}/assets/elements/${r}.svg`:""}function X(t){return{Unknown:"#f5f5f5",Rare:"#e3f2fd",Epic:"#f3e5f5",Legendary:"#fff9c4"}[t]||"#f5f5f5"}function Y(t){return{Unknown:"#ddd",Rare:"#42a5f5",Epic:"#ab47bc",Legendary:"#ffd54f"}[t]||"#ddd"}Be();var Z=ze(),ee=m(g(Z),2),ie=g(ee);M(ie,1,()=>W,N,(t,a)=>{var r=Ne(),s=g(r),d=g(s,!0);u(s);var o=m(s,2);M(o,5,()=>e(l)[e(a)],N,(n,c)=>{var v=Me(),x=g(v);{var F=S=>{var L=Re();E(se=>{p(L,"src",se),p(L,"alt",e(c).element)},[()=>B(e(c).element)]),y(S,L)},i=S=>{var L=Ce();y(S,L)};oe(x,S=>{B(e(c).element)?S(F):S(i,!1)})}var f=m(x,2),$=g(f,!0);u(f);var ne=m(f,2),me=m(ne,2),$e=g(me,!0);u(me),u(v),E((S,L,se)=>{j(v,`background-color: ${S??""}; border-color: ${L??""};`),p(v,"aria-label",`Drag ${e(c).name??""}`),D($,se),p(ne,"src",`${P??""}${e(c).levels[e(_)]??""}`),p(ne,"alt",e(c).name),D($e,e(c).name)},[()=>X(e(c).rarity),()=>Y(e(c).rarity),()=>Q(e(c).class)]),b("dragstart",v,S=>z(S,e(c),e(a))),y(n,v)}),u(o),u(r),E(n=>{j(s,`background-color: ${n??""}`),D(d,e(a)),p(o,"aria-label",`${e(a)??""} tier`)},[()=>K(e(a))]),b("dragover",o,G),b("drop",o,n=>J(n,e(a))),y(t,r)});var ae=m(ie,2),de=g(ae),R=m(de,2);M(R,5,()=>e(l).unranked,N,(t,a)=>{var r=He(),s=g(r);{var d=i=>{var f=Pe();E($=>{p(f,"src",$),p(f,"alt",e(a).element)},[()=>B(e(a).element)]),y(i,f)},o=i=>{var f=Ve();y(i,f)};oe(s,i=>{B(e(a).element)?i(d):i(o,!1)})}var n=m(s,2),c=g(n,!0);u(n);var v=m(n,2),x=m(v,2),F=g(x,!0);u(x),u(r),E((i,f,$)=>{j(r,`background-color: ${i??""}; border-color: ${f??""};`),p(r,"aria-label",`Drag ${e(a).name??""}`),D(c,$),p(v,"src",`${P??""}${e(a).levels[e(_)]??""}`),p(v,"alt",e(a).name),D(F,e(a).name)},[()=>X(e(a).rarity),()=>Y(e(a).rarity),()=>Q(e(a).class)]),b("dragstart",r,i=>z(i,e(a),"unranked")),y(t,r)}),u(R),u(ae);var ce=m(ae,2),ue=g(ce),C=m(ue,2);M(C,5,()=>e(l).notUnlocked,N,(t,a)=>{var r=qe(),s=g(r);{var d=i=>{var f=Oe();E($=>{p(f,"src",$),p(f,"alt",e(a).element)},[()=>B(e(a).element)]),y(i,f)},o=i=>{var f=We();y(i,f)};oe(s,i=>{B(e(a).element)?i(d):i(o,!1)})}var n=m(s,2),c=g(n,!0);u(n);var v=m(n,2),x=m(v,2),F=g(x,!0);u(x),u(r),E((i,f,$)=>{j(r,`background-color: ${i??""}; border-color: ${f??""};`),p(r,"aria-label",`Drag ${e(a).name??""}`),D(c,$),p(v,"src",`${P??""}${e(a).levels[e(_)]??""}`),p(v,"alt",e(a).name),D(F,e(a).name)},[()=>X(e(a).rarity),()=>Y(e(a).rarity),()=>Q(e(a).class)]),b("dragstart",r,i=>z(i,e(a),"notUnlocked")),y(t,r)}),u(C),u(ce),u(ee);var ve=m(ee,2),re=g(ve),te=m(re,2),Se=g(te);u(te);var fe=m(te,2);u(ve),u(Z),E((t,a)=>{j(de,`background-color: ${t??""}`),j(ue,`background-color: ${a??""}`),re.disabled=e(_)===1,D(Se,`Level ${e(_)??""}`),fe.disabled=e(_)===5},[()=>K("unranked"),()=>K("notUnlocked")]),b("dragover",R,G),b("drop",R,t=>J(t,"unranked")),b("dragover",C,G),b("drop",C,t=>J(t,"notUnlocked")),b("click",re,he),b("click",fe,we),y(h,Z),Ee(),O()}export{sa as component};
